<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Accordion Component</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        /* Smooth accordion panel transitions */
        .accordion-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }
        
        .accordion-panel.expanded {
            max-height: 500px;
            transition: max-height 0.3s ease-in, padding 0.3s ease-in;
        }
        
        /* Button focus styles for accessibility */
        .accordion-button:focus {
            outline: 2px solid #3b82f6;
            outline-offset: 2px;
        }
        
        /* Icon rotation animation */
        .accordion-icon {
            transition: transform 0.3s ease;
        }
        
        .accordion-icon.rotated {
            transform: rotate(180deg);
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .accordion-button {
                border: 2px solid;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .accordion-panel,
            .accordion-icon {
                transition: none;
            }
        }
        
        /* Screen reader only text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen py-8">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <!-- Page Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">Accessible Accordion Component</h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                A fully accessible accordion with proper ARIA attributes, keyboard navigation, and screen reader support.
            </p>
        </div>

        <!-- Accessibility Features Info -->
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8">
            <h2 class="text-lg font-semibold text-blue-900 mb-3">♿ Accessibility Features</h2>
            <ul class="text-sm text-blue-800 space-y-1">
                <li>• <strong>Keyboard Navigation:</strong> Tab, Enter, Space, and Arrow keys</li>
                <li>• <strong>Screen Reader Support:</strong> Proper ARIA labels and live regions</li>
                <li>• <strong>Focus Management:</strong> Clear focus indicators and logical tab order</li>
                <li>• <strong>High Contrast:</strong> Supports high contrast mode preferences</li>
                <li>• <strong>Reduced Motion:</strong> Respects user's motion preferences</li>
            </ul>
        </div>

        <!-- Main Accordion -->
        <div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
            <h2 class="sr-only">Frequently Asked Questions</h2>
            
            <!-- Accordion Container with proper ARIA attributes -->
            <div class="accordion" role="region" aria-labelledby="accordion-heading">
                <h3 id="accordion-heading" class="sr-only">FAQ Accordion</h3>
                
                <!-- Accordion Item 1 -->
                <div class="accordion-item border-b border-gray-200 last:border-b-0">
                    <h3>
                        <button 
                            class="accordion-button w-full px-6 py-4 text-left bg-white hover:bg-gray-50 focus:bg-gray-50 transition-colors"
                            type="button"
                            aria-expanded="false"
                            aria-controls="panel-1"
                            id="button-1"
                        >
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 pr-4">
                                    What is web accessibility and why is it important?
                                </span>
                                <svg 
                                    class="accordion-icon w-5 h-5 text-gray-500 flex-shrink-0" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    viewBox="0 0 24 24"
                                    aria-hidden="true"
                                >
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <span class="sr-only">Click to expand or collapse</span>
                        </button>
                    </h3>
                    <div 
                        class="accordion-panel"
                        id="panel-1"
                        role="region"
                        aria-labelledby="button-1"
                        aria-hidden="true"
                    >
                        <div class="px-6 pb-4 text-gray-600 leading-relaxed">
                            <p class="mb-4">
                                Web accessibility refers to the practice of designing and developing websites, applications, and digital content that can be used by people with disabilities. This includes individuals who are blind or have low vision, are deaf or hard of hearing, have motor disabilities, or cognitive disabilities.
                            </p>
                            <p class="mb-4">
                                Accessibility is important because:
                            </p>
                            <ul class="list-disc pl-6 space-y-2">
                                <li>It ensures equal access to information and functionality for all users</li>
                                <li>It's often required by law (ADA, Section 508, WCAG guidelines)</li>
                                <li>It improves usability for everyone, not just people with disabilities</li>
                                <li>It can improve SEO and reach a broader audience</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 2 -->
                <div class="accordion-item border-b border-gray-200 last:border-b-0">
                    <h3>
                        <button 
                            class="accordion-button w-full px-6 py-4 text-left bg-white hover:bg-gray-50 focus:bg-gray-50 transition-colors"
                            type="button"
                            aria-expanded="false"
                            aria-controls="panel-2"
                            id="button-2"
                        >
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 pr-4">
                                    How do I make my accordion accessible?
                                </span>
                                <svg 
                                    class="accordion-icon w-5 h-5 text-gray-500 flex-shrink-0" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    viewBox="0 0 24 24"
                                    aria-hidden="true"
                                >
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <span class="sr-only">Click to expand or collapse</span>
                        </button>
                    </h3>
                    <div 
                        class="accordion-panel"
                        id="panel-2"
                        role="region"
                        aria-labelledby="button-2"
                        aria-hidden="true"
                    >
                        <div class="px-6 pb-4 text-gray-600 leading-relaxed">
                            <p class="mb-4">
                                To make an accordion accessible, follow these key principles:
                            </p>
                            <ol class="list-decimal pl-6 space-y-3">
                                <li><strong>Use proper ARIA attributes:</strong> Include aria-expanded, aria-controls, and aria-labelledby</li>
                                <li><strong>Implement keyboard navigation:</strong> Support Tab, Enter, Space, and arrow keys</li>
                                <li><strong>Provide clear focus indicators:</strong> Make it obvious which element has focus</li>
                                <li><strong>Use semantic HTML:</strong> Proper heading structure and button elements</li>
                                <li><strong>Include screen reader text:</strong> Add context for assistive technologies</li>
                                <li><strong>Respect user preferences:</strong> Support reduced motion and high contrast modes</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 3 -->
                <div class="accordion-item border-b border-gray-200 last:border-b-0">
                    <h3>
                        <button 
                            class="accordion-button w-full px-6 py-4 text-left bg-white hover:bg-gray-50 focus:bg-gray-50 transition-colors"
                            type="button"
                            aria-expanded="false"
                            aria-controls="panel-3"
                            id="button-3"
                        >
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 pr-4">
                                    What keyboard shortcuts work with this accordion?
                                </span>
                                <svg 
                                    class="accordion-icon w-5 h-5 text-gray-500 flex-shrink-0" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    viewBox="0 0 24 24"
                                    aria-hidden="true"
                                >
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <span class="sr-only">Click to expand or collapse</span>
                        </button>
                    </h3>
                    <div 
                        class="accordion-panel"
                        id="panel-3"
                        role="region"
                        aria-labelledby="button-3"
                        aria-hidden="true"
                    >
                        <div class="px-6 pb-4 text-gray-600 leading-relaxed">
                            <p class="mb-4">
                                This accordion supports the following keyboard interactions:
                            </p>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <dl class="space-y-3">
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">Tab</dt>
                                        <dd class="text-sm">Move focus to the next accordion button</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">Shift+Tab</dt>
                                        <dd class="text-sm">Move focus to the previous accordion button</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">Enter</dt>
                                        <dd class="text-sm">Toggle the focused accordion panel</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">Space</dt>
                                        <dd class="text-sm">Toggle the focused accordion panel</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">↓</dt>
                                        <dd class="text-sm">Move focus to the next accordion button</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">↑</dt>
                                        <dd class="text-sm">Move focus to the previous accordion button</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">Home</dt>
                                        <dd class="text-sm">Move focus to the first accordion button</dd>
                                    </div>
                                    <div class="flex">
                                        <dt class="font-mono text-sm bg-gray-200 px-2 py-1 rounded mr-3 min-w-20">End</dt>
                                        <dd class="text-sm">Move focus to the last accordion button</dd>
                                    </div>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 4 -->
                <div class="accordion-item border-b border-gray-200 last:border-b-0">
                    <h3>
                        <button 
                            class="accordion-button w-full px-6 py-4 text-left bg-white hover:bg-gray-50 focus:bg-gray-50 transition-colors"
                            type="button"
                            aria-expanded="false"
                            aria-controls="panel-4"
                            id="button-4"
                        >
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 pr-4">
                                    How do screen readers interact with this accordion?
                                </span>
                                <svg 
                                    class="accordion-icon w-5 h-5 text-gray-500 flex-shrink-0" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    viewBox="0 0 24 24"
                                    aria-hidden="true"
                                >
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <span class="sr-only">Click to expand or collapse</span>
                        </button>
                    </h3>
                    <div 
                        class="accordion-panel"
                        id="panel-4"
                        role="region"
                        aria-labelledby="button-4"
                        aria-hidden="true"
                    >
                        <div class="px-6 pb-4 text-gray-600 leading-relaxed">
                            <p class="mb-4">
                                Screen readers interact with this accordion through several accessibility features:
                            </p>
                            <ul class="list-disc pl-6 space-y-2 mb-4">
                                <li><strong>Semantic Structure:</strong> Each accordion item is properly marked up with heading elements</li>
                                <li><strong>State Announcement:</strong> Screen readers announce whether panels are expanded or collapsed</li>
                                <li><strong>Relationship Mapping:</strong> ARIA attributes connect buttons to their corresponding panels</li>
                                <li><strong>Context Information:</strong> Additional screen reader text provides usage instructions</li>
                                <li><strong>Live Updates:</strong> Changes in state are announced automatically</li>
                            </ul>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                <p class="text-sm text-blue-800">
                                    <strong>💡 Tip:</strong> Try using a screen reader like NVDA, JAWS, or VoiceOver to experience how this accordion works for users who rely on assistive technology.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Accordion Item 5 -->
                <div class="accordion-item border-b border-gray-200 last:border-b-0">
                    <h3>
                        <button 
                            class="accordion-button w-full px-6 py-4 text-left bg-white hover:bg-gray-50 focus:bg-gray-50 transition-colors"
                            type="button"
                            aria-expanded="true"
                            aria-controls="panel-5"
                            id="button-5"
                        >
                            <div class="flex items-center justify-between">
                                <span class="text-lg font-medium text-gray-900 pr-4">
                                    Can multiple panels be open at the same time?
                                </span>
                                <svg 
                                    class="accordion-icon w-5 h-5 text-gray-500 flex-shrink-0 rotated" 
                                    fill="none" 
                                    stroke="currentColor" 
                                    viewBox="0 0 24 24"
                                    aria-hidden="true"
                                >
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </div>
                            <span class="sr-only">Click to expand or collapse</span>
                        </button>
                    </h3>
                    <div 
                        class="accordion-panel expanded"
                        id="panel-5"
                        role="region"
                        aria-labelledby="button-5"
                        aria-hidden="false"
                    >
                        <div class="px-6 pb-4 text-gray-600 leading-relaxed">
                            <p class="mb-4">
                                Yes! This accordion allows multiple panels to be open simultaneously. This design pattern is sometimes called a "disclosure widget" or "expandable sections" rather than a traditional accordion.
                            </p>
                            <p class="mb-4">
                                Benefits of allowing multiple open panels:
                            </p>
                            <ul class="list-disc pl-6 space-y-2">
                                <li>Users can compare information across different sections</li>
                                <li>No content is hidden when users open new sections</li>
                                <li>Better for complex forms or detailed information</li>
                                <li>Reduces cognitive load by not forcing users to remember previous content</li>
                            </ul>
                            <p class="mt-4 text-sm bg-green-50 border border-green-200 rounded-lg p-3 text-green-800">
                                <strong>Note:</strong> This panel is open by default to demonstrate the expanded state!
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Testing Instructions -->
        <div class="mt-8 bg-gray-100 rounded-lg p-6">
            <h2 class="text-lg font-semibold text-gray-900 mb-3">🧪 Test the Accessibility</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700">
                <div>
                    <h3 class="font-medium mb-2">Keyboard Testing:</h3>
                    <ul class="space-y-1">
                        <li>• Use Tab to navigate between buttons</li>
                        <li>• Press Enter or Space to toggle panels</li>
                        <li>• Try arrow keys for quick navigation</li>
                        <li>• Use Home/End keys to jump to first/last</li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-medium mb-2">Screen Reader Testing:</h3>
                    <ul class="space-y-1">
                        <li>• Enable your screen reader</li>
                        <li>• Navigate through the accordion</li>
                        <li>• Listen for state announcements</li>
                        <li>• Check heading navigation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Live region for screen reader announcements -->
    <div aria-live="polite" aria-atomic="true" class="sr-only" id="live-region"></div>

    <script>
        class AccessibleAccordion {
            constructor(accordionElement) {
                this.accordion = accordionElement;
                this.buttons = this.accordion.querySelectorAll('.accordion-button');
                this.panels = this.accordion.querySelectorAll('.accordion-panel');
                this.liveRegion = document.getElementById('live-region');
                
                this.init();
            }

            init() {
                // Add event listeners to all accordion buttons
                this.buttons.forEach((button, index) => {
                    button.addEventListener('click', (e) => this.togglePanel(e, index));
                    button.addEventListener('keydown', (e) => this.handleKeyDown(e, index));
                });

                // Set initial ARIA attributes
                this.updateARIAAttributes();
            }

            togglePanel(event, index) {
                const button = this.buttons[index];
                const panel = this.panels[index];
                const icon = button.querySelector('.accordion-icon');
                
                const isExpanded = button.getAttribute('aria-expanded') === 'true';
                const newState = !isExpanded;

                // Update ARIA attributes
                button.setAttribute('aria-expanded', newState);
                panel.setAttribute('aria-hidden', !newState);

                // Toggle visual classes
                if (newState) {
                    panel.classList.add('expanded');
                    icon.classList.add('rotated');
                } else {
                    panel.classList.remove('expanded');
                    icon.classList.remove('rotated');
                }

                // Announce state change to screen readers
                const panelTitle = button.querySelector('span').textContent;
                const stateText = newState ? 'expanded' : 'collapsed';
                this.announceToScreenReader(`${panelTitle} ${stateText}`);

                // Prevent default button behavior
                event.preventDefault();
            }

            handleKeyDown(event, index) {
                const key = event.key;
                let targetIndex = index;

                switch (key) {
                    case 'ArrowDown':
                        event.preventDefault();
                        targetIndex = (index + 1) % this.buttons.length;
                        this.focusButton(targetIndex);
                        break;
                    
                    case 'ArrowUp':
                        event.preventDefault();
                        targetIndex = (index - 1 + this.buttons.length) % this.buttons.length;
                        this.focusButton(targetIndex);
                        break;
                    
                    case 'Home':
                        event.preventDefault();
                        this.focusButton(0);
                        break;
                    
                    case 'End':
                        event.preventDefault();
                        this.focusButton(this.buttons.length - 1);
                        break;
                    
                    case 'Enter':
                    case ' ':
                        event.preventDefault();
                        this.togglePanel(event, index);
                        break;
                }
            }

            focusButton(index) {
                this.buttons[index].focus();
            }

            updateARIAAttributes() {
                this.buttons.forEach((button, index) => {
                    const panel = this.panels[index];
                    const isExpanded = panel.classList.contains('expanded');
                    
                    button.setAttribute('aria-expanded', isExpanded);
                    panel.setAttribute('aria-hidden', !isExpanded);
                });
            }

            announceToScreenReader(message) {
                if (this.liveRegion) {
                    this.liveRegion.textContent = message;
                    // Clear the message after a short delay to allow for re-announcements
                    setTimeout(() => {
                        this.liveRegion.textContent = '';
                    }, 1000);
                }
            }
        }

        // Initialize the accordion when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const accordionElement = document.querySelector('.accordion');
            if (accordionElement) {
                new AccessibleAccordion(accordionElement);
            }
        });

        // Additional accessibility enhancements
        document.addEventListener('DOMContentLoaded', function() {
            // Add skip link functionality if needed
            const skipLinks = document.querySelectorAll('a[href^="#"]');
            skipLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        e.preventDefault();
                        target.focus();
                        target.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });

            // Respect user's reduced motion preference
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.documentElement.style.setProperty('--animation-duration', '0s');
            }

            // High contrast mode detection and adjustments
            if (window.matchMedia('(prefers-contrast: high)').matches) {
                document.body.classList.add('high-contrast');
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'984d59d627dc0254',t:'MTc1ODgzMjk3Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
